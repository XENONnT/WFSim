// WFSim configuration for nT TPC copyed from 1T
// https://github.com/XENONnT/strax_auxiliary_files/blob/master/sim_files/fax_config_1t.json
// for testing purpose
// Last updated March 9 2021

// Be warned, most values are assumed

{
    // Configuration flags
    "s1_model_type": "simple",
    "s2_luminescence_model": "simple",
    "enable_gas_gap_warping": false,
    "enable_pmt_afterpulses": false,
    "enable_electron_afterpulses": false,
    "enable_noise": false,
    "field_distortion_on": false,
    "enable_field_dependencies": {
        "survival_probability_map": true,
        "drift_speed_map": false,
        "diffusion_longitudinal_map": false,
        "diffusion_transverse_map": false},

    // Resource
    "url_base": "https://raw.githubusercontent.com/XENONnT/WFSim/e890b18f3caab9889a166273580b06f56da5ac58/files",
    "photon_area_distribution": "XENONnT_spe_distributions_1T_copy.csv",
    "s1_pattern_map": ["constant dummy", 14e-5, [494,]],
    "s2_pattern_map": ["constant dummy", 30e-5, [494,]],
    "s2_correction_map": ["constant dummy", 1, []],
    "field_dependencies_map": ["constant dummy", 1, []],

    // LXe properties
    "temperature": 177.45,                                 # K
    "pressure": 1.210852812592475e+18,
    "lxe_dielectric_constant": 1.874,

    // Geometry
    "tpc_length": 97,                                      # cm;
    "tpc_radius": 50,                                      # cm;
    "anode_wire_radius": 0.01175,                          # cm; for S2 generation
    "anode_field_domination_distance": 0.036,              # cm; for S2 generation
    "elr_gas_gap_length": 0.266,                           # cm; liquid-gas interface to bottom of anode, for S2 generation
    "gate_to_anode_distance": 0.5,                         # cm; top of gate to bottom of anode (not considering perpendicular wires)

    // Field
    "drift_field": 82.0,                                   # V/cm
    "anode_voltage": 4000.0,                               # V
    "diffusion_constant_longitudinal": 2.935e-08,          # cm^2/ns
    "diffusion_constant_transverse": 2e-08,                # cm^2/ns The value is made up for testing
    "drift_time_gate": 1700.0,                             # ns; drift_diffusion
    "drift_velocity_liquid": 0.0001335,                    # cm/ns; drift_diffusion

    // Recombination
    "singlet_fraction_gas": 0.35,
    "singlet_lifetime_gas": 5.88,
    "singlet_lifetime_liquid": 3.1,
    "triplet_lifetime_gas": 149.0,
    "triplet_lifetime_liquid": 24.0,
    "s1_ER_alpha_singlet_fraction": 0.7368421052631579,
    "s1_ER_primary_singlet_fraction": 0.1452991452991453,
    "s1_ER_recombination_fraction": 0.9,
    "s1_ER_recombination_time": 4.276062489602044,
    "s1_ER_secondary_singlet_fraction": 0.4444444444444444,
    "s1_NR_singlet_fraction": 0.8863636363636364,
    "maximum_recombination_time": 1000.0,

    // S1 model
    "s1_decay_spread": 5,
    "s1_decay_time": 44.77,        
    "s1_detection_efficiency": 0.12,

    // S2 model
    "s2_mean_area_fraction_top": 0.627,
    "s2_secondary_sc_gain": 21.3,                          # hits
    "s2_time_spread": 0,                                   # single_e_pulse
    "electron_extraction_yield": 1,
    "electron_lifetime_liquid": 650000.0,                  # ns;
    "electron_trapping_time": 140.0,
    "gas_drift_velocity_slope": 5400000000000.0,

    // PMT
    "p_double_pe_emision": 0.219,
    "pe_pulse_ts": [
        -13,
        -12,
        -11,
        -10,
        -9,
        -8,
        -7,
        -6,
        -5,
        -4,
        -3,
        -2,
        -1,
        0,
        1,
        2,
        3,
        4,
        5,
        6,
        7,
        8,
        9,
        10,
        11,
        12,
        13,
        14,
        15,
        16,
        17,
        18,
        19,
        20,
        21,
        22,
        23,
        24,
        25,
        26,
        27,
        28,
        29,
        30,
        31,
        32,
        33,
        34,
        35,
        36,
        37,
        38,
        39,
        40,
        41,
        42,
        43,
        44,
        45,
        46,
        47,
        48,
        49,
        50,
        51,
        52,
        53,
        54,
        55,
        56,
        57,
        58,
        59,
        60,
        61,
        62,
        63,
        64,
        65,
        66,
        67,
        68,
        69,
        70,
        71,
        72,
        73,
        74,
        75,
        76,
        77,
        78,
        79,
        80,
        81,
        82,
        83,
        84,
        85,
        86,
        87,
        88,
        89,
        90,
        91,
        92,
        93,
        94,
        95,
        96,
        97,
        98,
        99,
        100,
        101,
        102,
        103,
        104,
        105,
        106,
        107,
        108,
        109,
        110,
        111,
        112,
        113,
        114,
        115,
        116,
        117,
        118,
        119,
        120,
        121,
        122,
        123,
        124,
        125,
        126,
        127,
        128,
        129,
        130,
        131,
        132,
        133,
        134,
        135,
        136,
        137,
        138,
        139,
        140,
        141,
        142,
        143,
        144,
        145,
        146,
        147,
        148,
        149,
        150,
        151,
        152,
        153,
        154,
        155,
        156,
        157,
        158,
        159,
        160,
        161,
        162,
        163,
        164,
        165,
        166,
        167,
        168,
        169,
        170,
        171,
        172,
        173,
        174,
        175,
        176,
        177,
        178,
        179,
        180,
        181,
        182,
        183,
        184,
        185,
        186,
        187,
        188,
        189,
        190,
        191,
        192,
        193,
        194,
        195
    ],
    "pe_pulse_ys": [
        5.877972164179458e-09,
        8.655525785456122e-08,
        9.494125588317938e-07,
        7.896805563760717e-06,
        5.0878565098147255e-05,
        0.00025904060183682944,
        0.0010546866894903517,
        0.0034372690428190844,
        0.008918175306240714,
        0.018366585294685045,
        0.03024293464574896,
        0.04070285285992151,
        0.04650274440945783,
        0.04738821191801888,
        0.045269280688785586,
        0.0420583181746971,
        0.03873509136879648,
        0.035604682980707264,
        0.03271708669859928,
        0.03006262425253816,
        0.027623450572224897,
        0.025382178597567896,
        0.023322755583582648,
        0.021430427093330644,
        0.019691635654062734,
        0.018093923795527204,
        0.016625844803847056,
        0.01527688071229399,
        0.014037366945928706,
        0.012898423080313378,
        0.0117226134274469,
        0.010654620425448081,
        0.007486532911462879,
        0.007122986413393814,
        0.006759439915324416,
        0.0063958934172549066,
        0.006032346919185841,
        0.005668800421116332,
        0.005305253923046934,
        0.004954040729682673,
        0.004615160841022549,
        0.004498280437047894,
        0.004381400033073238,
        0.004264519629098583,
        0.004147639225123928,
        0.004030758821149161,
        0.003913878417174506,
        0.0037969980131998507,
        0.0036801176092253066,
        0.0035661831429826276,
        0.0034551946144725913,
        0.0033972329651430124,
        0.003339271315813323,
        0.003281309666483744,
        0.0032233480171541657,
        0.003165386367824587,
        0.0031074247184950084,
        0.0030494630691652075,
        0.002991501419835629,
        0.0029345925847569037,
        0.002878736563928587,
        0.002841831199613188,
        0.002804925835297788,
        0.0027680204709823884,
        0.0027311151066669887,
        0.0026942097423514784,
        0.0026573043780361897,
        0.002620399013720679,
        0.002583493649405279,
        0.0025470331080403733,
        0.0025110173896258497,
        0.002483008484319546,
        0.0024549995790133527,
        0.0024269906737071595,
        0.002398981768400855,
        0.002370972863094662,
        0.0023429639577884688,
        0.0023149550524821645,
        0.0022869461471758602,
        0.0022592201366423946,
        0.002231777020881435,
        0.0022094260110277998,
        0.0021870750011742757,
        0.0021647239913207515,
        0.002142372981467338,
        0.002120021971613703,
        0.0020976709617601787,
        0.0020753199519066546,
        0.002052968942053241,
        0.0020307543953674546,
        0.00200867631184985,
        0.001989054565354189,
        0.001969432818858306,
        0.0019498110723626448,
        0.0019301893258668727,
        0.0019105675793713226,
        0.0018909458328754394,
        0.0018713240863797783,
        0.0018517023398840063,
        0.0018323263223003487,
        0.0018131960336284728,
        0.0017984888653722166,
        0.0017837816971160714,
        0.0017690745288597041,
        0.001754367360603559,
        0.0017396601923473027,
        0.0017249530240910464,
        0.0017102458558346792,
        0.001695538687578423,
        0.0016813056397601814,
        0.0016675467123799547,
        0.0016623219528827716,
        0.0016570971933854775,
        0.0016518724338885165,
        0.0016466476743912226,
        0.0016414229148939284,
        0.0016361981553968564,
        0.0016309733958997843,
        0.0016257486364023791,
        0.0016202321178094528,
        0.00161442384012045,
        0.0016033638987052918,
        0.001592303957290245,
        0.0015812440158751977,
        0.0015701840744600396,
        0.0015591241330449924,
        0.0015480641916298342,
        0.001537004250214787,
        0.0015259443087995179,
        0.0015148109383005546,
        0.0015036041387176751,
        0.001491075615624526,
        0.0014785470925315991,
        0.001466018569438339,
        0.001453490046345301,
        0.001440961523252152,
        0.0014284330001590028,
        0.0014159044770659648,
        0.0014033759539728158,
        0.0013911025358676267,
        0.0013790842227502866,
        0.0013716577994147816,
        0.0013642313760793877,
        0.0013568049527439938,
        0.001349378529408378,
        0.0013419521060730952,
        0.0013345256827375902,
        0.0013270992594020853,
        0.0013196728360666916,
        0.0013122629141418373,
        0.001304869493627745,
        0.0012977730985050332,
        0.0012906767033823215,
        0.001283580308259388,
        0.0012764839131367872,
        0.0012693875180140755,
        0.0012622911228913638,
        0.001255194727768541,
        0.0012480983326459403,
        0.0012409999123474602,
        0.0012338994668731004,
        0.0012267625682346867,
        0.001219625669596495,
        0.0012124887709579703,
        0.0012053518723195566,
        0.0011982149736811428,
        0.0011910780750428401,
        0.0011839411764043154,
        0.0011768042777659017,
        0.0011693420067777262,
        0.0011615543634395673,
        0.0011479100178038103,
        0.0011342656721679426,
        0.0011206213265321859,
        0.00110697698089654,
        0.0010933326352606722,
        0.0010796882896250263,
        0.0010660439439892696,
        0.0010523995983534019,
        0.0010394190161775144,
        0.0010271021974616074,
        0.0010267331210240156,
        0.001026364044586091,
        0.0010259949681484994,
        0.0010256258917104636,
        0.001025256815272983,
        0.0010248877388350584,
        0.0010245186623973556,
        0.001024149585959653,
        0.0010225269485754907,
        0.0010196507502449798,
        0.0009942104548798607,
        0.0009687701595146309,
        0.0009433298641495118,
        0.0009178895687842819,
        0.000892449273419274,
        0.000867008978054155,
        0.000841568682688814,
        0.0008161283873238061,
        0.0007904692274874684,
        0.0007645912031799121,
        0.0007347736183906416,
        0.0007049560336012601,
        0.0006751384488119896,
        0.0006453208640227192,
        0.0006155032792334486,
        0.0005856856944440671,
        0.0005558681096547966,
        0.0005260505248655261
    ],
    "pmt_ap_modifier": 1,
    "pmt_ap_t_modifier": 270,
    "pmt_pulse_time_rounding": 1.0,
    "pmt_transit_time_mean": 46.0,                         # ns
    "pmt_transit_time_spread": 9.0,                        # ns; FWHM

    // Electron afterpulse
    "photoelectric_modifier": 1,
    "photoelectric_p": 0.001,
    "photoelectric_t_center": -800,
    "photoelectric_t_spread": 250,
    "photoionization_modifier": 1,

    // Digitizer
    "sample_duration": 10,
    "samples_after_pulse_center": 20,
    "samples_before_pulse_center": 2,
    "samples_to_store_after": 50,
    "samples_to_store_before": 50,
    "pmt_circuit_load_resistor": 8.010882825e-09,
    "external_amplification": 10,
    "high_energy_deamplification_factor": 0.05,
    "trigger_window": 50,
    "digitizer_bits": 14,
    "digitizer_reference_baseline": 16000,
    "digitizer_voltage_range": 2.25,
    "special_thresholds": {},
    "zle_threshold": 15
}
